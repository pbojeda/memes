# B0.6: Configure ESLint + Prettier

**Sprint:** 0
**Type:** Backend - Setup
**Priority:** Medium
**Status:** Pending
**Branch:** feature/sprint0-B0.6-eslint-prettier
**Created:** 2026-02-03
**Dependencies:** B0.1 (Express + TypeScript)

---

## Description

Configure ESLint and Prettier for the backend to enforce code quality and consistent formatting. This ensures all code follows the same style guidelines and catches common issues before they reach code review.

---

## Acceptance Criteria

- [ ] ESLint configured with TypeScript support
- [ ] Prettier configured for code formatting
- [ ] ESLint and Prettier integrated (no conflicts)
- [ ] npm scripts for lint, lint:fix, and format
- [ ] VS Code settings for auto-format on save (optional)
- [ ] Pre-existing code passes linting (or issues documented)

---

## Files to Create/Modify

| File | Purpose |
|------|---------|
| `backend/.eslintrc.js` | ESLint configuration |
| `backend/.prettierrc` | Prettier configuration |
| `backend/.prettierignore` | Files to ignore for formatting |
| `backend/package.json` | Add lint scripts and dev dependencies |

---

## Dependencies

### Dev Dependencies
```json
{
  "eslint": "^9.x",
  "@typescript-eslint/parser": "^8.x",
  "@typescript-eslint/eslint-plugin": "^8.x",
  "eslint-config-prettier": "^10.x",
  "eslint-plugin-prettier": "^5.x",
  "prettier": "^3.x"
}
```

---

## Configuration

### ESLint Configuration (.eslintrc.js)

```javascript
module.exports = {
  root: true,
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaVersion: 2022,
    sourceType: 'module',
    project: './tsconfig.json',
  },
  plugins: ['@typescript-eslint', 'prettier'],
  extends: [
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:@typescript-eslint/recommended-requiring-type-checking',
    'plugin:prettier/recommended',
  ],
  env: {
    node: true,
    jest: true,
  },
  rules: {
    // TypeScript specific
    '@typescript-eslint/explicit-function-return-type': 'warn',
    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
    '@typescript-eslint/no-explicit-any': 'error',

    // General
    'no-console': ['warn', { allow: ['warn', 'error'] }],
    'prefer-const': 'error',

    // Prettier
    'prettier/prettier': 'error',
  },
  ignorePatterns: [
    'dist/',
    'node_modules/',
    'coverage/',
    'src/generated/',
  ],
};
```

### Prettier Configuration (.prettierrc)

```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 100,
  "tabWidth": 2,
  "useTabs": false,
  "bracketSpacing": true,
  "arrowParens": "always"
}
```

### Prettier Ignore (.prettierignore)

```
dist/
node_modules/
coverage/
src/generated/
*.md
```

---

## npm Scripts

```json
{
  "scripts": {
    "lint": "eslint 'src/**/*.ts'",
    "lint:fix": "eslint 'src/**/*.ts' --fix",
    "format": "prettier --write 'src/**/*.ts'",
    "format:check": "prettier --check 'src/**/*.ts'"
  }
}
```

---

## Test Specifications (TDD)

This is a configuration task, so testing involves:

1. **Verify ESLint runs without errors:**
   ```bash
   npm run lint
   ```

2. **Verify Prettier runs without errors:**
   ```bash
   npm run format:check
   ```

3. **Verify lint:fix works:**
   ```bash
   npm run lint:fix
   ```

4. **Verify no conflicts between ESLint and Prettier:**
   - Run both and ensure no conflicting rules

---

## Implementation Steps

1. Install dev dependencies
2. Create `.eslintrc.js` configuration
3. Create `.prettierrc` configuration
4. Create `.prettierignore` file
5. Add npm scripts to package.json
6. Run lint on existing code and fix issues
7. Verify all tools work together

---

## Definition of Done

- [ ] ESLint installed and configured
- [ ] Prettier installed and configured
- [ ] No conflicts between ESLint and Prettier
- [ ] All npm scripts work correctly
- [ ] Existing code passes linting (or documented exceptions)
- [ ] Generated Prisma files excluded from linting

---

## Notes

### Configuration Decisions
- Using ESLint 9.x with flat config support
- Prettier integrated via eslint-plugin-prettier
- Strict TypeScript rules enabled for type safety
- `no-console` as warning (not error) to allow debugging during development
- Generated files (Prisma) excluded from all checks

### VS Code Integration (Optional)
Add to `.vscode/settings.json`:
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  }
}
```

---

*Ticket created: 2026-02-03*

# B0.5: Setup Jest for testing

**Sprint:** 0
**Type:** Backend - Setup
**Priority:** High
**Status:** Completed
**Branch:** feature/sprint0-B0.5-jest-setup
**Created:** 2026-02-03
**Completed:** 2026-02-03
**Dependencies:** B0.1 (Express + TypeScript)

---

## Description

Configure Jest testing framework with TypeScript support for the backend. This establishes the testing infrastructure required for TDD development throughout the project.

---

## Acceptance Criteria

- [x] Jest installed and configured
- [x] ts-jest preset configured for TypeScript
- [x] Test discovery working (`*.test.ts` files)
- [x] Coverage reporting configured
- [x] Generated files excluded from coverage
- [x] npm scripts for test, test:watch, test:coverage

---

## Files Created/Modified

| File | Purpose |
|------|---------|
| `backend/jest.config.js` | Jest configuration with ts-jest preset |
| `backend/package.json` | Test scripts added |

---

## Dependencies

### Dev Dependencies
```json
{
  "jest": "^30.x",
  "@types/jest": "^30.x",
  "ts-jest": "^29.x",
  "supertest": "^7.x",
  "@types/supertest": "^6.x"
}
```

---

## Test Configuration

```javascript
// jest.config.js
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  roots: ['<rootDir>/src'],
  testMatch: ['**/*.test.ts'],
  moduleFileExtensions: ['ts', 'js', 'json'],
  collectCoverageFrom: [
    'src/**/*.ts',
    '!src/**/*.test.ts',
    '!src/server.ts',
    '!src/generated/**'
  ],
  coverageDirectory: 'coverage',
  verbose: true
};
```

---

## npm Scripts

```json
{
  "test": "jest",
  "test:watch": "jest --watch",
  "test:coverage": "jest --coverage"
}
```

---

## Definition of Done

- [x] Jest runs successfully
- [x] TypeScript tests compile and execute
- [x] Coverage excludes generated Prisma files
- [x] All existing tests pass (17 tests at completion)

---

## Notes

### Implementation Notes (2026-02-03)
- Jest was already installed as part of B0.1, this task verified configuration
- Added exclusion for `src/generated/**` to prevent Prisma files affecting coverage
- Test suites: app.test.ts, env.test.ts, logger.test.ts, prisma.test.ts

---

*Ticket created: 2026-02-03*

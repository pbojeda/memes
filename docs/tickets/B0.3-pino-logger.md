# B0.3: Setup Pino logger

**Sprint:** 0
**Type:** Backend - Setup
**Priority:** High
**Status:** Ready for Review
**Branch:** feature/sprint0-B0.3-pino-logger
**Created:** 2026-02-03
**Dependencies:** B0.1 (Express + TypeScript) âœ…

---

## Description

Setup Pino logger for structured JSON logging. This provides production-grade logging with proper log levels, request correlation, and JSON output for log aggregation systems.

---

## Acceptance Criteria

- [x] Pino logger installed and configured
- [x] Logger supports multiple log levels (debug, info, warn, error)
- [x] Pretty printing enabled for development
- [x] JSON output for production
- [x] Request logging middleware created
- [x] Logger exported as singleton
- [x] Environment-based log level configuration

---

## Files to Create/Modify

| File | Purpose |
|------|---------|
| `backend/src/lib/logger.ts` | Pino logger singleton |
| `backend/src/lib/logger.test.ts` | Tests for logger |
| `backend/src/middleware/requestLogger.ts` | HTTP request logging middleware |
| `backend/src/middleware/requestLogger.test.ts` | Tests for middleware |
| `backend/src/server.ts` | Update to use logger |
| `backend/.env.example` | Add LOG_LEVEL |

---

## Dependencies

### Production
```json
{
  "pino": "^9.x",
  "pino-http": "^10.x"
}
```

### Development
```json
{
  "pino-pretty": "^13.x"
}
```

---

## Test Specifications (TDD)

```typescript
// backend/src/lib/logger.test.ts
describe('Logger', () => {
  it('should export a logger instance', () => {
    expect(logger).toBeDefined();
  });

  it('should have standard log methods', () => {
    expect(typeof logger.info).toBe('function');
    expect(typeof logger.error).toBe('function');
    expect(typeof logger.warn).toBe('function');
    expect(typeof logger.debug).toBe('function');
  });

  it('should create child loggers', () => {
    const child = logger.child({ module: 'test' });
    expect(child).toBeDefined();
  });
});
```

---

## Definition of Done

- [x] All tests pass (12 tests)
- [x] TypeScript compiles without errors
- [x] Logger works in dev (pretty) and prod (JSON) modes
- [x] Code validated by production-code-validator
- [x] No console.log statements remaining

---

## Notes

### Implementation Notes (2026-02-03)
- Pino 10.3.0 with pino-http 11.0.0 for request logging
- pino-pretty 13.1.3 for development output
- Silent mode in test environment to keep test output clean
- Request logger ignores /health endpoint
- Custom log levels: 500+ = error, 400+ = warn, rest = info
- Removed TODO comment from server.ts (was tracking this task)

---

*Ticket created: 2026-02-03*

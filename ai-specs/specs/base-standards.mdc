---
description: This document contains all development rules and guidelines for this project, applicable to all AI agents (Claude, Cursor, Codex, Gemini, etc.).
alwaysApply: true
---

## 1. Core Principles

- **Small tasks, one at a time**: Always work in baby steps, one at a time. Never go forward more than one step.
- **Test-Driven Development**: Start with failing tests for any new functionality (TDD), according to the task details.
- **Type Safety**: All code must be fully typed.
- **Clear Naming**: Use clear, descriptive names for all variables and functions.
- **Incremental Changes**: Prefer incremental, focused changes over large, complex modifications.
- **Question Assumptions**: Always question assumptions and inferences.
- **Pattern Detection**: Detect and highlight repeated code patterns.

## 2. Language Standards
- **English Only**: All technical artifacts must always use English, including:
    - Code (variables, functions, classes, comments, error messages, log messages)
    - Documentation (README, guides, API docs)
    - Jira tickets (titles, descriptions, comments)
    - Data schemas and database names
    - Configuration files and scripts
    - Git commit messages
    - Test names and descriptions

## 3. Monorepo Directory Rules

This project is a **monorepo** with separate directories for backend and frontend:

```
memes/
├── backend/     ← Node.js/Express backend (has its own package.json)
├── frontend/    ← Next.js frontend (will have its own package.json)
└── docs/        ← Documentation (no package.json)
```

### Critical Rules

- **ALWAYS verify the current directory** before running `npm install`, `npm test`, or any npm command
- **NEVER install dependencies in the root directory** - each subproject has its own `package.json`
- **Use absolute paths** when running commands: `cd /path/to/backend && npm install`
- **Check pwd** if unsure: run `pwd` before npm commands

### Directory-Specific Commands

| Action | Correct | Wrong |
|--------|---------|-------|
| Install backend dep | `cd backend && npm install express` | `npm install express` (from root) |
| Run backend tests | `cd backend && npm test` | `npm test` (from root) |
| Install frontend dep | `cd frontend && npm install react` | `npm install react` (from root) |

## 4. Specific Standards

For detailed standards and guidelines specific to different areas of the project, refer to:

- [Backend Standards](./backend-standards.mdc) - API development, database patterns, testing, security and backend best practices
- [Frontend Standards](./frontend-standards.mdc) - React components, UI/UX guidelines, and frontend architecture
- [Documentation Standards](./documentation-standards.mdc) - Technical documentation structure, formatting, and maintenance guidelines, including AI standards like this document

<!-- ## Workflow
- Start complex tasks in Plan mode
- Get plan approval before implementation
- Break large changes into reviewable chunks

## Verification Requirements
- Run `npm test` after code changes
- Run `npm run typecheck` before marking complete
- For API changes, test with `curl` or Postman
- For UI changes, verify in browser before committing -->

## 5. Project Memory System

This project maintains institutional knowledge in `docs/project_notes/` for consistency across sessions.

### Memory Files

- **bugs.md** - Bug log with dates, solutions, and prevention notes
- **decisions.md** - Architectural Decision Records (ADRs) with context and trade-offs
- **key_facts.md** - Project configuration, credentials, ports, important URLs
- **issues.md** - Work log with ticket IDs, descriptions, and URLs

### Memory-Aware Protocols

**Before proposing architectural changes:**
- Check `docs/project_notes/decisions.md` for existing decisions
- Verify the proposed approach doesn't conflict with past choices
- If it does conflict, acknowledge the existing decision and explain why a change is warranted

**When encountering errors or bugs:**
- Search `docs/project_notes/bugs.md` for similar issues
- Apply known solutions if found
- Document new bugs and solutions when resolved

**When looking up project configuration:**
- Check `docs/project_notes/key_facts.md` for credentials, ports, URLs, service accounts
- Prefer documented facts over assumptions

**When completing work on tickets:**
- Log completed work in `docs/project_notes/issues.md`
- Include ticket ID, date, brief description, and URL

**When user requests memory updates:**
- Update the appropriate memory file (bugs, decisions, key_facts, or issues)
- Follow the established format and style (bullet lists, dates, concise entries)

## 6. Related Documentation

- [Architecture](./docs/ARQUITECTURA.md) - System architecture with diagrams
- [Business Requirements](./docs/NEGOCIO.md) - Business context and requirements
- [Data Model](./ai-specs/specs/data-model.md) - Database schema documentation
- [API Specification](./ai-specs/specs/api-spec.yaml) - OpenAPI specification
- [Use Cases](./docs/use-cases.md) - Use Cases
- [Development Guide](./ai-specs/specs/development-guide.yaml) - Development Guide